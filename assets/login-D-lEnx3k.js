import{u as _,ai as A,aj as T,a as $,o as B,g as M,w as n,aM as c,d as t,ap as p,e as o,aV as P,aU as g,an as q,ao as F,ar as R}from"./index-B5GFQXZq.js";import{c as U,a as b,u as C,d as V,V as I}from"./index.esm-WlsNqJoh.js";import{v as N}from"./index-TVJRU2ft.js";import{a as f,V as D,b as v}from"./route-block-rW1XtWmZ.js";import{V as L}from"./VDivider-D-fT6S-2.js";import{V as j}from"./VContainer-Cq7Q4N9Y.js";import"./_commonjsHelpers-Cpj98o6Y.js";const E={class:"text-center"},G={class:"text-center"},z={__name:"login",setup(H){const{t:e}=_(),{api:w}=R(),d=A(),h=T(),x=$(),S=U({account:b().required(e("api.userAccountRequired")).min(4,e("api.userAccountTooShort")).max(20,e("api.userAccountTooLong")).test("isAlphanumeric",e("api.userAccountInvalid"),a=>N.isAlphanumeric(a)),password:b().required(e("api.userPasswordRequired")).min(4,e("api.userPasswordTooShort")).max(20,e("api.userPasswordTooLong"))}),{handleSubmit:y,isSubmitting:m}=C({validationSchema:S}),u=V("account"),i=V("password"),k=y(async a=>{var s,r;try{const{data:l}=await w.post("/user/login",{account:a.account,password:a.password});x.login(l.result),d({text:e("login.success"),snackbarProps:{color:"green"}}),h.push("/")}catch(l){console.log(l),d({text:e("api."+(((r=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:r.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(a,s)=>(B(),M(j,{style:{position:"relative"}},{default:n(()=>[s[2]||(s[2]=c("div",{class:"BackgroundIMG"},null,-1)),t(D,{style:{position:"absolute",top:"90px",left:"700px",width:"700px"}},{default:n(()=>[t(f,{cols:"12"},{default:n(()=>[c("h1",E,p(a.$t("nav.login")),1)]),_:1}),t(L),t(f,{cols:"12"},{default:n(()=>[t(I,{disabled:o(m),onSubmit:P(o(k),["prevent"])},{default:n(()=>[t(g,{modelValue:o(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=r=>o(u).value.value=r),"error-messages":o(u).errorMessage.value,label:a.$t("user.account"),minlength:"4",maxlength:"20",counter:"",class:"custom-label"},null,8,["modelValue","error-messages","label"]),t(g,{modelValue:o(i).value.value,"onUpdate:modelValue":s[1]||(s[1]=r=>o(i).value.value=r),type:"password","error-messages":o(i).errorMessage.value,label:a.$t("user.password"),minlength:"4",maxlength:"20",counter:"",class:"custom-label"},null,8,["modelValue","error-messages","label"]),c("div",G,[t(q,{loading:o(m),type:"submit",color:"primary"},{default:n(()=>[F(p(a.$t("login.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof v=="function"&&v(z);export{z as default};
