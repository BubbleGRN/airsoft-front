import{u as _,ak as A,al as T,a as $,o as B,j as M,g as n,aM as c,f as t,ap as p,h as o,aV as P,aU as g,an as q,ao as F,ar as R}from"./index-UR6t7LWQ.js";import{c as U,a as f,u as C,d as b,V as I}from"./index.esm-CeVDuEnI.js";import{v as N}from"./index-TVJRU2ft.js";import{b as V}from"./route-block-B_A1xBdJ.js";import{a as v,V as D}from"./VRow-C0F7vqWP.js";import{V as L}from"./VDivider-z7DtT3J7.js";import{V as j}from"./VContainer-CTkW8SnP.js";import"./_commonjsHelpers-Cpj98o6Y.js";const E={class:"text-center"},G={class:"text-center"},z={__name:"login",setup(H){const{t:e}=_(),{api:w}=R(),d=A(),h=T(),x=$(),S=U({account:f().required(e("api.userAccountRequired")).min(4,e("api.userAccountTooShort")).max(20,e("api.userAccountTooLong")).test("isAlphanumeric",e("api.userAccountInvalid"),a=>N.isAlphanumeric(a)),password:f().required(e("api.userPasswordRequired")).min(4,e("api.userPasswordTooShort")).max(20,e("api.userPasswordTooLong"))}),{handleSubmit:k,isSubmitting:m}=C({validationSchema:S}),u=b("account"),i=b("password"),y=k(async a=>{var s,r;try{const{data:l}=await w.post("/user/login",{account:a.account,password:a.password});x.login(l.result),d({text:e("login.success"),snackbarProps:{color:"green"}}),h.push("/")}catch(l){console.log(l),d({text:e("api."+(((r=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:r.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(a,s)=>(B(),M(j,{style:{position:"relative"}},{default:n(()=>[s[2]||(s[2]=c("div",{class:"BackgroundIMG"},null,-1)),t(D,{style:{position:"absolute",top:"90px",left:"700px",width:"700px"}},{default:n(()=>[t(v,{cols:"12"},{default:n(()=>[c("h1",E,p(a.$t("nav.login")),1)]),_:1}),t(L),t(v,{cols:"12"},{default:n(()=>[t(I,{disabled:o(m),onSubmit:P(o(y),["prevent"])},{default:n(()=>[t(g,{modelValue:o(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=r=>o(u).value.value=r),"error-messages":o(u).errorMessage.value,label:a.$t("user.account"),minlength:"4",maxlength:"20",counter:"",class:"custom-label"},null,8,["modelValue","error-messages","label"]),t(g,{modelValue:o(i).value.value,"onUpdate:modelValue":s[1]||(s[1]=r=>o(i).value.value=r),type:"password","error-messages":o(i).errorMessage.value,label:a.$t("user.password"),minlength:"4",maxlength:"20",counter:"",class:"custom-label"},null,8,["modelValue","error-messages","label"]),c("div",G,[t(q,{loading:o(m),type:"submit",color:"primary"},{default:n(()=>[F(p(a.$t("login.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof V=="function"&&V(z);export{z as default};
